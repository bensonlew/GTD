#+TAGS: { @Office(o) @Home(h) @Call(c) @Way(w) @Lunchtime(l) @GYM(g) @Other(x)}
#+TAGS:
* Projects
** 有参转录组云平台维护和bug修复

*** DONE 数据库 注释查询查不到pathway
    SCHEDULED: <2017-10-26 Thu>
*** DONE 跟新小鼠数据库
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from ""           [2017-12-24 日 20:46]
    :END:
*** DONE NR数据库描述不正确
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from ""           [2017-12-24 日 20:46]
    :END:
*** DONE 重新导入小鼠数据库的表格
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from ""           [2017-12-24 日 20:46]
    :END:



*** DONE 注释导表允许空表
    CLOSED: [2017-12-26 二 22:17] SCHEDULED: <2017-12-25 日>
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-26 二 22:17]
    :END:

*** DONE 修改导表函数 kegg K 和描述不对应问题
api/database/ref_rna/ref_annotation.py
*** DONE 写一个注释单独导表函数
    CLOSED: [2017-12-26 二 22:21]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-26 二 22:21]
    :END:

*** DONE 设计分片方案，发给郭权
*** DONE 根据要求做对应的修改
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:

*** DONE 云平台数据库导表，读表结构修改
    SCHEDULED: <2017-10-26 Thu>
**** 修改biocluster配置文件
**** 修改app database
**** 修改mbio api web ref_rna文件
**** 修改mbio api to_file文件
**** 修改webroot models mongo文件
**** DONE 接口修改 添加check参数





** 有参转录组参考基因组制作

*** DONE 棉花JGI参考基因组整理
   SCHEDULED: <2017-10-25 Wed>
    注释
    核对结果
    tsanger注释
    核对结果

*** DONE 玉米Annotation文件整理

*** DONE 写做数据库流程
*** DONE NCBI数据库流程 测试
    CLOSED: [2018-01-18 四 21:32]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-18 四 21:32]
    - State "NEXT"       from "DONE"       [2018-01-18 四 21:32]
    - State "DONE"       from "CANCELLED"  [2018-01-18 四 21:32]
    - State "DELEGATED"  from "WAITING"    [2018-01-18 四 21:31]
    :END:
*** DONE 棉铃虫参考基因组整理
    CLOSED: [2017-11-12 Sun 10:37]
    :LOGBOOK:
    - State "DONE"       from "TODO"       [2017-11-12 Sun 10:37]
    :END:
*** DONE https://www.ncbi.nlm.nih.gov/genome/?term=Punica+granatum 基因组整理
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:
*** DONE 辣椒参考基因组准备。杜和山给出的
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:
*** DONE 崔艳艳给的参考基因组整理
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:

*** DONE bug
**** 数据库KO问题 查询页转录本导表有问题
    TestRef数据库任然可能有问题
    kegg通路不对应
    查询页GO需要重导入

*** DONE 检查各数据库统计结果是否一致
*** DONE 基因组json文件完整性与路径检查
*** DONE 写脚本检查数据库统计不对应问题

*** DONE 查看GO参考导表是否有误
    SCHEDULED: <2017-10-27 Fri>
*** DONE 评估崔艳艳参考基因组
   SCHEDULED: <2017-11-01 Wed>

*** DONE 核对水稻和草鱼注释结果统计数据量
    CLOSED: [2017-11-12 Sun 11:30]
    :LOGBOOK:
    - State "DONE"       from "TODO"       [2017-11-12 Sun 11:30]
    :END:
*** DONE 烟草2017新版基因组整理
    CLOSED: [2017-12-24 日 20:51]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-24 日 20:51]
    - State "TODO"       from "DONE"       [2017-11-12 Sun 11:31]
    - State "DONE"       from "TODO"       [2017-11-12 Sun 11:30]
    :END:
*** DONE 基因组注释整理COG没有考虑一个基因有多个COG的情况
    CLOSED: [2017-12-24 日 20:51]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-24 日 20:51]
    :END:

*** DONE 刘旋给的两个基因组上线注意type ENSEMBLE正确区分1、2、3
    CLOSED: [2017-12-27 三 22:30] DEADLINE: <2017-12-25 一> SCHEDULED: <2017-12-25 一>
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:30]
    :END:
    注意type ENSEMBLE正确区分1、2、3
*** DONE 整理辣椒基因组
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from "TODO"       [2017-12-24 日 20:46]
    :END:
*** 基因组问题修复
**** DONE 猫基因组问题 使用了rm的版本
     CLOSED: [2018-01-04 四 22:24]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:24]
     :END:
**** DONE 石榴基因组忘记添加
     CLOSED: [2018-01-04 四 22:25]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:25]
     :END:
**** DONE 本氏烟基因组忘记添加
     CLOSED: [2018-01-05 五 19:01] SCHEDULED: <2018-01-05 五>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-05 五 19:01]
     :END:
**** DONE 真菌基因组问题 使用masked基因组
     CLOSED: [2018-01-05 五 19:01]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-05 五 19:01]
     :END:

*** DONE 猫的基因组问题
    CLOSED: [2018-01-03 三 21:45]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-03 三 21:45]
    :END:
     cufflink stringtie 组装后边界超出是因为基因组使用了masked缘故
*** DONE 牵牛基因组去除gene: transcript: ensemble下载GFF的问题以后注意使用gtf
    CLOSED: [2018-01-26 五 20:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-26 五 20:29]
    :END:

** denovo云平台开发
*** 组装模块
**** DONE TRINITY TOOLS编写
     CLOSED: [2017-12-12 Tue 11:26]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:26]
     :END:

**** DONE TRINITY 虚拟内存使用研究 /mnt/ilustre/users/sanger-dev/workspace/20171109/Single_de_t3_1/Trinity__3
    CLOSED: [2018-01-10 三 22:54]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-10 三 22:54]
    :END:
    有的命令内存过大每个butterfly 占用8+N g的虚拟内存， 使用parafly容易造成虚拟内存超标把Trinity的butter改成串行
**** DONE Busco TOOLS编写
     CLOSED: [2017-12-12 Tue 11:26]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:26]
     :END:
**** DONE TRANsrate TOOLS编写
     CLOSED: [2017-11-12 Sun 12:44]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-11-12 Sun 12:44]
     :END:
**** DONE rna fastatat TOOLS编写
     CLOSED: [2017-12-12 Tue 11:27]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:27]
     :END:
**** DONE 整合组装modules
     CLOSED: [2017-12-24 日 20:51]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-24 日 20:51]
     :END:
**** DONE 组装结果导表
     CLOSED: [2017-12-12 Tue 11:27]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:27]
     :END:
**** DONE 组装结果导表 数据地址错误、重复到同一个表
     CLOSED: [2018-01-02 二 19:11]
     :LOGBOOK:
     - State "DONE"       from "PROJECT"    [2018-01-02 二 19:11]
     - State "PROJECT"    from "DONE"       [2018-01-02 二 19:11]

**** DONE 组装结果拆分组装优化一个module，结果评估一个module
     CLOSED: [2017-12-24 日 20:52] DEADLINE: <2017-12-13 Wed>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-24 日 20:52]
     :END:
**** DONE 组装问题如何跳过event
     CLOSED: [2017-12-26 二 22:22] SCHEDULED: <2017-12-25 一>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-26 二 22:22]
     :END:
**** DONE filter unigene on assemble module
     SCHEDULED: <2017-12-25 一>
**** DONE 导表函数修改 路径选择添加filter
     SCHEDULED: <2017-12-25 一>
**** DONE bug修复cog\kegg\排序，注释表格统计名称排序规范
     CLOSED: [2017-12-28 四 22:26]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:26]
     :END:
**** DONE 修改组装到表函数接受没有优化的结果
     CLOSED: [2017-12-28 四 22:27]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:27]
     :END:
**** DONE 插入基因集删除接口
     CLOSED: [2017-12-28 四 22:29]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:29]
     :END:
**** DONE 插入比对统计表格导表函数
     CLOSED: [2017-12-28 四 22:29]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:29]
     :END:
**** DONE venn图数据没插入因为修改结果名称，导致导表时找不到对应venn文件
     CLOSED: [2018-01-10 三 22:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-10 三 22:57]
     :END:
**** DONE transrate大数据报错研究 snap设置内存相关参数过小具体查看参数snap设置，不写任何参数好像可以
     CLOSED: [2018-01-10 三 23:00] SCHEDULED: <2018-01-12 五>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-10 三 23:00]
     - State "NEXT"       from "DONE"       [2018-01-04 四 22:35]
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:35]
     - State "DONE"       from "NEXT"       [2017-12-29 五 18:42]
     :END:

**** DONE transrate大数据报错研究 salmon添加最后一个参数出不了表大量 有一个参数有两个值需要修改ruby脚本 单独运行可以但transrate包装后就不可以了
    CLOSED: [2018-01-12 五 19:17]
    可能和snap源码有关系
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-12 五 19:17]
    - State "NEXT"       from "DONE"       [2018-01-05 五 19:04]
    - State "DONE"       from "NEXT"       [2017-12-29 五 18:42]
    :END:
    目前证明是slurm识别虚拟内存并自动控制，可增大内存申请或ssh localhost (需要配置机器)解决
**** DONE Trinity组装分为几个步骤butterfly分机器投递
     CLOSED: [2018-01-10 三 22:59]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-10 三 22:59]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:
***** DONE 分布投递tools
      CLOSED: [2018-01-03 三 21:41]
      :LOGBOOK:
      - State "DONE"       from "PROJECT"    [2018-01-03 三 21:41]
      - State "PROJECT"    from "DONE"       [2018-01-03 三 21:41]
      - State "DONE"       from "PROJECT"    [2018-01-03 三 21:41]
      - State "PROJECT"    from "DONE"       [2018-01-03 三 21:41]
      - State "DONE"       from "PROJECT"    [2018-01-03 三 21:41]
      - State "PROJECT"    from "DONE"       [2018-01-03 三 21:41]
      - State "DONE"       from "NEXT"       [2018-01-02 二 19:04]
      :END:
***** DONE 合并
      CLOSED: [2018-01-03 三 21:42]
      :LOGBOOK:
      - State "DONE"       from "NEXT"       [2018-01-03 三 21:42]
      :END:
***** DONE module修改
      CLOSED: [2018-01-03 三 21:42] SCHEDULED: <2018-01-03 三>
      :LOGBOOK:
      - State "DONE"       from "NEXT"       [2018-01-03 三 21:42]
      :END:

***** DONE 允许出错源目录自动重新运行
***** DONE 测试
      CLOSED: [2018-01-20 六 11:48] SCHEDULED: <2018-01-05 五>
      :LOGBOOK:
      - State "DONE"       from "PROJECT"    [2018-01-20 六 11:48]
      - State "PROJECT"    from "DONE"       [2018-01-20 六 11:48]
      - State "DONE"       from "NEXT"       [2018-01-20 六 11:48]
      :END:

**** DONE Trinity优化随机分布butter命令
     CLOSED: [2018-01-18 四 21:38]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:38]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 修改云平台denovo导表，测试会重复到两次
     CLOSED: [2018-01-26 五 20:41]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 20:41]
     - State "NEXT"       from "DONE"       [2018-01-26 五 20:41]
     - State "DONE"       from "PROJECT"    [2018-01-26 五 20:41]
     - State "PROJECT"    from "DONE"       [2018-01-26 五 20:41]
     :END:

**** DONE 组装结果长度统计表添加表头百分比
     CLOSED: [2018-01-18 四 21:39]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:39]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 组装sanger trinity修复，不能运行
     CLOSED: [2018-01-18 四 21:41]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:41]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:
     perl版本没装threads库，装了后影响注释的COG XML,DBI等pm需要重装

**** DONE 导表函数添加主表main_id
     CLOSED: [2018-01-03 三 21:47]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-03 三 21:47]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 导表函数错误，未做优化时初始化值仍然为优化的结果
     CLOSED: [2018-01-26 五 20:28]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 20:28]
     :END:
**** DONE 组装transrate中间重运行会依赖之前的结果，但是结果不完整回报错，表达量计算结果都是NAN
     CLOSED: [2018-01-24 三 20:15]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:15]
     :END:
**** DONE 组装输入文件不一致 gene2trans文件不对会报Index not found
     CLOSED: [2018-01-24 三 20:16]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:16]
     :END:
**** DONE transrate大数据会占满系统的内存导致卡死，目前修改了使得使用hisat mapping bam替换
     CLOSED: [2018-02-02 五 18:31]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-02-02 五 18:31]
     :END:

**** DONE 组装支持单向reads组装
     CLOSED: [2018-05-02 三 18:46]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:46]
     :END:
     module添加参数\transrate虚拟right.fq因为之前改过接受bam文件会通过, 在gene2trans文件处卡了一会,原因是正常统计和过滤后gene2tran文件不一致忘了之前的设计

**** DONE buscol unigene评估时发现有无优化 结果非常接近
     CLOSED: [2018-05-07 一 19:29]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-07 一 19:29]
     :END:
**** DONE 组装线上线下比较结果
     CLOSED: [2019-01-26 六 16:08] SCHEDULED: <2018-01-29 一>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2019-01-26 六 16:08]
     :END:
     有的结果非常碎，暂时无法解决
**** DONE 比对率统计的reads数量少一半
     CLOSED: [2019-01-26 六 16:07]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2019-01-26 六 16:07]
     :END:
**** DONE denovo组装时如果重新跑distribue的步骤complete的也会作为一个tools跑
     CLOSED: [2019-01-26 六 16:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2019-01-26 六 16:08]
     :END:
*** 注释模块
**** DONE denovo注释流程梳理
     CLOSED: [2017-12-12 Tue 11:32]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:32]
     :END:
**** DONE denovo注释module编写
     CLOSED: [2017-12-12 Tue 11:32]
     :LOGBOOK:
     - State "DONE"       from ""           [2017-12-12 Tue 11:32]
     :END:
**** DONE denovo注释导表
     CLOSED: [2017-12-12 Tue 11:32]
     :LOGBOOK:
     - State "DONE"       from ""           [2017-12-12 Tue 11:32]
     :END:
**** DONE denovo注释重运行接口
     SCHEDULED: <2017-12-25 一>


**** DONE 注释kegg分类结果排序，插入主表分类类型
     CLOSED: [2017-12-26 二 22:22]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-26 二 22:22]
     :END:

**** DONE 根据仝颜丽提供的新原型修改开发文档
     CLOSED: [2017-12-26 二 22:23]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-26 二 22:23]
     :END:

**** DONE 注释导表，GO重新插入seq_list, 仅二级分类

**** DONE percent添加或删除
     CLOSED: [2018-01-08 一 20:02]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-08 一 20:02]
     :END:

**** DONE kegg顺序
     CLOSED: [2018-01-08 一 20:02]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-08 一 20:02]
     :END:

**** DONE 注释导表参数格式修改，流程里调用添加参数

**** DONE fasta文件分割少序列
     CLOSED: [2018-01-18 四 21:41]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:41]
     :END:

     分割循环到达界限时跳过
**** DONE SwissProt P改大写
     CLOSED: [2018-01-22 一 19:21]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-22 一 19:21]
     :END:
**** DONE COG分类顺序问题修改
     CLOSED: [2018-01-08 一 20:02]
     基因顺序仍然不对
  :LOGBOOK:
  - State "DONE"       from "NEXT"       [2018-01-08 一 20:02]
     - State "NEXT"       from "DONE"       [2018-01-05 五 19:06]
     - State "DONE"       from "PROJECT"    [2018-01-05 五 19:06]
     - State "PROJECT"    from "DONE"       [2018-01-05 五 19:06]
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:34]
     :END:

**** DONE 核查cog查询结果与统计不一致，前端查询选了基因的
     CLOSED: [2018-01-26 五 21:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 21:08]
     :END:
**** DONE 蛋白互做,ipath迁移,等待和前端对接
     CLOSED: [2019-01-26 六 16:06]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2019-01-26 六 16:06]
     :END:
*** DONE 火山图出现问题多条密集横线，显示端没有取单独一组比较的数据
    CLOSED: [2018-02-22 四 20:45]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-02-22 四 20:45]
    :END:

*** 片健设置
**** DONE tsg建立索引
     CLOSED: [2018-01-24 三 20:00]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:00]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块/DENOVO片键设置
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 写分片脚本
     CLOSED: [2018-01-24 三 20:00]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:00]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块/DENOVO片键设置
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 交给权哥执行
     CLOSED: [2018-01-24 三 20:00]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:00]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块/DENOVO片键设置
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 表格片键索引建立
     CLOSED: [2018-01-25 四 21:30] SCHEDULED: <2018-01-05 五>
     :LOGBOOK:
     - State "DONE"       from "PROJECT"    [2018-01-25 四 21:30]
     - State "PROJECT"    from "DONE"       [2018-01-25 四 21:30]
     - State "DONE"       from "NEXT"       [2018-01-25 四 21:30]
     :END:

**** DONE DENOVO片键设置
     CLOSED: [2018-01-25 四 21:31]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-25 四 21:31]
     :END:
**** DONE 核查并修改错误
     CLOSED: [2018-01-25 四 21:31]
     :LOGBOOK:
     - State "DONE"       from "PROJECT"    [2018-01-25 四 21:31]
     - State "PROJECT"    from "DONE"       [2018-01-25 四 21:31]
     - State "DONE"       from "NEXT"       [2018-01-25 四 21:31]
     :END:
     类似key missing的错误 属于没有找到片键对应的值 多数是测试插入的值不完整，可能是索引错误（名称写错）
**** DONE 测试
     CLOSED: [2018-01-26 五 20:26]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 20:26]
     :END:
**** DONE 设置sanger数据库索引
     CLOSED: [2018-02-02 五 18:31]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-02-02 五 18:31]
     :END:
**** DONE 设置sanger的片键 目前发现使用update更新数据表时，查询索引必须和片键索引有重叠
     CLOSED: [2019-01-26 六 16:11]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2019-01-26 六 16:11]
     :END:


** 蛋白云平台开发
*** 基因集模块
**** DONE 表结构
     CLOSED: [2018-02-11 日 19:50] SCHEDULED: <2018-02-06 二>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-02-11 日 19:50]
     :END:
**** DONE 开发文档 已完成除了互做网络和弦图之外的内容
     CLOSED: [2018-04-10 二 21:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-10 二 21:57]
     - State "NEXT"       from "DONE"       [2018-04-05 四 08:57]
     - State "DONE"       from "NEXT"       [2018-04-05 四 08:57]
     :END:
**** DONE tool
     CLOSED: [2018-04-05 四 08:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-05 四 08:57]
     :END:
**** DONE 导表
     CLOSED: [2018-04-05 四 08:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-05 四 08:57]
     :END:
**** DONE 基因集工作流
     工作流提示参数***不存在，请先添加参数注意是否option写错了，需要注意workflow中是否缺少相关内容
     CLOSED: [2018-03-08 四 18:43]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-08 四 18:43]
     :END:
**** DONE 接口测试，重启接口需要touch reload 在webroot目录下
     CLOSED: [2018-03-12 一 19:54]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-12 一 19:54]
     :END:
     注意检查接口的文件名和类名称是否一致，检查参数是否正确，完整 使用站长工具转换unicode错误提示
     tofile需要检查是否有对应的函数 mongodb字段名是否完整正确
     工作流的日志可以到biocluster log下获得
     提示NoneType时多为数据库没有找到数据表格
**** DONE 聚类模块中位数和均值需要测试
     CLOSED: [2018-05-02 三 18:40]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:40]
     :END:
**** DONE 基因集添加统计的字段用于创建基因集
     CLOSED: [2018-04-07 六 16:56]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-07 六 16:56]
     :END:
**** DONE KEGG注释和分类 生成html文件
     CLOSED: [2018-05-02 三 18:40]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:40]
     :END:
**** DONE 基因集几个模块中seq_list等字段的修改
     CLOSED: [2018-03-25 日 14:09]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-25 日 14:09]
     :END:
**** DONE 蛋白互做模块增加相关网络得分信息注释
     CLOSED: [2018-04-10 二 21:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-10 二 21:57]
     :END:
**** DONE 蛋白互做模块blast注释信息
     CLOSED: [2018-04-10 二 21:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-10 二 21:57]
     :END:
**** DONE 富集分析结果纵坐标插入
     CLOSED: [2018-04-07 六 16:56]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-07 六 16:56]
     :END:
**** DONE 弦图插入主表数量少1
     CLOSED: [2018-04-10 二 21:59]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-10 二 21:59]
     :END:
**** DONE 表达量表格名称修改 tofile\model等和数据库有关的需要修改， 后续测试
     CLOSED: [2018-03-25 日 14:09]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-25 日 14:09]
     :END:
**** DONE enrich表格插入enrich_factor kegg插入分类信息
     CLOSED: [2018-03-16 五 18:26]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-16 五 18:26]
     :END:
**** DONE ipath模块开发 导表时字段值不可以为set但可为list
     CLOSED: [2018-04-05 四 08:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-05 四 08:57]
     :END:
**** DONE 富集结果字段修改插入-log_pvalue
     CLOSED: [2018-03-29 四 18:44]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-29 四 18:44]
     :END:
**** DONE 富集弦图生成脚本，导入表格和接口
     CLOSED: [2018-03-25 日 14:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-25 日 14:08]
     :END:
**** DONE 富集弦图表结构和开发文档修改
    CLOSED: [2018-04-05 四 08:57]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-04-05 四 08:57]
    :END:
在接口函数中如果出现了member_id的错误
**** DONE 修改ipath图形标签超出页面, venn不插入status表, go有向无环图以文件存到数据库中
     CLOSED: [2018-05-02 三 18:51]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:51]
     :END:
**** DONE 修改蛋白互做网络出现的问题
     CLOSED: [2018-05-02 三 18:48]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:48]
     :END:
     要充分理解接口参数的作用,除了参数传递外还有记录和反选的功能,不传递的参数不能.放在param里应为前端无法判断参数的重运行
     参数传递在未webapi>workflow->module/tools 判断参数修改时也需要全面检查不能只改一处
     问题都是由于网页端与结果文件不一致造成的,删除了几个表格,结果文件做了处理,切忌以后的数据处理千万不在表结构导入时进行,除非是页面要显示的数据

**** DONE 接口404错误表示不同查看接口名称,地址是否对应,init文件是否完整 DONE
     CLOSED: [2018-05-08 二 22:27]
     :LOGBOOK:
     - State "DONE"       from "PROJECT"    [2018-05-08 二 22:27]
     - State "PROJECT"    from "DONE"       [2018-05-08 二 22:27]
     - State "DONE"       from "NEXT"       [2018-05-07 一 19:33]
     - State "DONE"       from "NEXT"       [2018-05-07 一 19:32]
     - State "NEXT"       from "DONE"       [2018-05-07 一 19:32]
     - State "DONE"       from "NEXT"       [2018-05-07 一 19:32]
     :END:
**** DONE 基因集kegg分类add_command 须添加ignore* 参数像是框架修改后parafly常见的问题
     CLOSED: [2018-05-07 一 19:31]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-07 一 19:31]
     :END:
**** DONE 查找go弦图重运行问题
     CLOSED: [2018-05-10 四 21:11]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-10 四 21:11]
     :END:
**** DONE 修改go有像无环图相关的图形文件,描述换行,插入svg,pdf
     CLOSED: [2018-05-10 四 21:13]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-10 四 21:13]
     :END:
**** DONE 查找kegg分类为什么没有图片,发现图片是以map开头的,进而发现注释参数没有传到module里去
     CLOSED: [2018-05-14 一 19:48]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-14 一 19:48]
     :END:
**** DONE svg图像和平台对接
     CLOSED: [2018-05-14 一 19:49]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-14 一 19:49]
     :END:
**** DONE ipath需要添加相关图片的标题，重新核对数据库
     CLOSED: [2018-06-07 四 18:12]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-06-07 四 18:12]
     :END:
**** DONE circ模块的bug修改是属于min_dep max_dep两个用混了
     CLOSED: [2018-05-08 二 22:16]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-08 二 22:16]
     :END:
     调试的方法可以print 也可以ipython前者未必效率低下, 今天遇到的问题时ipython 有的参数不方便导入,直接写了一个常数结果不报错,
     此时要查看ipython的输入是否完全和想像中的相同
**** DONE pathway上下调分类结果图片错误，只有未标记的图片
    CLOSED: [2018-04-05 四 08:57]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-04-05 四 08:57]
    :END:
#一般是sg_task表格多导入了

**** DONE ipath研究 共表达网络 下载IPATH svg文件
     CLOSED: [2018-06-07 四 18:15]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-06-07 四 18:15]
     :END:
     写抓取ipathsvg ko 对应关系的脚本
     ipath 图片中好多位置信息有多个ko, 映射时采用kegg的结果conf文件第一个ko
     string数据库可以在sql数据库找到链接地址，PDB数据库的三维结构可下载 ，有几张失败
     ipath数据库需要进一步补充优化
*** 注释模块

**** DONE 表结构
     CLOSED: [2018-02-02 五 18:45]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-02-02 五 18:45]
     :END:
**** DONE 开发文档
     CLOSED: [2018-03-06 二 20:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-06 二 20:08]
     :END:
**** DONE tool
     CLOSED: [2018-03-06 二 20:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-06 二 20:08]
     :END:
***** DONE 亚细胞定位tools
      CLOSED: [2018-05-02 三 18:39]
      :LOGBOOK:
      - State "DONE"       from "NEXT"       [2018-05-02 三 18:39]
      :END:
      tools不可以指定outfile 在测试时，会检查文件是否存在
      tools所在文件里须有 __init__.py 否则则找不到module
**** DONE 导表
     CLOSED: [2018-03-06 二 20:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-06 二 20:08]
     :END:
**** DONE 删除annotype 为的字段
     CLOSED: [2018-03-14 三 20:58]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-14 三 20:58]
     :END:
**** DONE 添加type origin latest字段
     CLOSED: [2018-03-14 三 20:58]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-03-14 三 20:58]
     :END:
**** DONE kegg生成html文件
     CLOSED: [2018-05-02 三 18:39]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:39]
     :END:
**** DONE 亚细胞定位改为并行运算，现在出结果太慢
     CLOSED: [2018-05-02 三 18:40]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:40]
     :END:
**** DONE 注释的trabscript.xls 改为protein.xls
     CLOSED: [2018-04-07 六 16:42]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-07 六 16:42]
     :END:
**** DONE 工作流插入注释导表流程
     CLOSED: [2018-05-02 三 18:40]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-02 三 18:40]
     :END:
**** DONE 修改注释统计的错误,应该事先规定好传入文件的格式
     CLOSED: [2018-04-07 六 16:51]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-04-07 六 16:51]
     :END:
**** DONE 注释重运行错误,修改kegg前10条通路的导入,之前重运行没有注意导入
     CLOSED: [2018-05-09 三 19:42]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-09 三 19:42]
     :END:
**** DONE itraq bug修复删除之前pfam导入的高e-value记录
     CLOSED: [2018-05-09 三 19:43]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-05-09 三 19:43]
     :END:
**** DONE 注释模块调整比对保留条数
     CLOSED: [2018-06-07 四 18:13]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-06-07 四 18:13]
     :END:
**** DONE 注释GO合并已知注释
     CLOSED: [2018-06-07 四 18:13]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-06-07 四 18:13]
     :END:
*** ipath

*** interproscan
*** DONE 协助安装interpro
    CLOSED: [2018-01-25 四 21:30]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-25 四 21:30]
    :END:
*** DONE 测试sherloc
    CLOSED: [2018-01-16 二 18:48] SCHEDULED: <2018-01-16 二>需要服务已过期
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-16 二 18:48]
    :END:
*** DONE 测试MultiLoc2成功使用
    CLOSED: [2018-01-22 一 19:23]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-22 一 19:23]
    :END:
*** DONE 给杨兵亚细胞定位预测结果
    CLOSED: [2018-02-11 日 19:56]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-02-11 日 19:56]
    :END:
*** CANCELLED 测试Psortb 库文件错误，需要尝试重新安装
    CLOSED: [2018-02-01 四 20:11]
    :LOGBOOK:
    - State "NEXT"       from "DONE"       [2018-02-01 四 20:10]
    - State "DONE"       from "PROJECT"    [2018-02-01 四 20:10]
    - State "PROJECT"    from "DONE"       [2018-02-01 四 20:10]
    - State "DONE"       from "PROJECT"    [2018-02-01 四 20:10]
    - State "PROJECT"    from "DONE"       [2018-02-01 四 20:10]
    - State "DONE"       from "PROJECT"    [2018-02-01 四 20:10]
    - State "PROJECT"    from "DONE"       [2018-02-01 四 20:10]
    - State "DONE"       from "PROJECT"    [2018-02-01 四 20:10]
    - State "PROJECT"    from "DONE"       [2018-02-01 四 20:10]
    - State "DONE"       from "PROJECT"    [2018-02-01 四 20:10]
    - State "PROJECT"    from "DONE"       [2018-02-01 四 20:10]
    - State "DONE"       from "NEXT"       [2018-02-01 四 20:10]
    :END:
*** CANCELLED IlocAnimal 序列多时提交不反回邮件，在线只允许5条
    CLOSED: [2018-02-08 四 18:50]
    :LOGBOOK:
    - State "NEXT"       from "DONE"       [2018-02-08 四 18:50]
    - State "DONE"       from "PROJECT"    [2018-02-08 四 18:50]
    - State "PROJECT"    from "DONE"       [2018-02-08 四 18:50]
    - State "DONE"       from "PROJECT"    [2018-02-08 四 18:50]
    - State "PROJECT"    from "DONE"       [2018-02-08 四 18:50]
    - State "DONE"       from "PROJECT"    [2018-02-08 四 18:50]
    - State "PROJECT"    from "DONE"       [2018-02-08 四 18:50]
    - State "DONE"       from "NEXT"       [2018-02-08 四 18:50]
    :END:
*** DONE 模块软件研究，亚细胞定位 计划使用TARGETP
    CLOSED: [2018-01-25 四 21:30]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-25 四 21:30]
    :END:

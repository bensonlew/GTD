* Projects
** 有参转录组云平台维护和bug修复

*** DONE 数据库 注释查询查不到pathway
    SCHEDULED: <2017-10-26 Thu>
*** DONE 跟新小鼠数据库
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from ""           [2017-12-24 日 20:46]
    :END:
*** DONE NR数据库描述不正确
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from ""           [2017-12-24 日 20:46]
    :END:
*** DONE 重新导入小鼠数据库的表格
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from ""           [2017-12-24 日 20:46]
    :END:



*** DONE 注释导表允许空表
    CLOSED: [2017-12-26 二 22:17] SCHEDULED: <2017-12-25 日>
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-26 二 22:17]
    :END:

*** DONE 修改导表函数 kegg K 和描述不对应问题
api/database/ref_rna/ref_annotation.py
*** DONE 写一个注释单独导表函数
    CLOSED: [2017-12-26 二 22:21]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-26 二 22:21]
    :END:

*** DONE 设计分片方案，发给郭权
*** DONE 根据要求做对应的修改
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:

*** DONE 云平台数据库导表，读表结构修改
    SCHEDULED: <2017-10-26 Thu>
**** 修改biocluster配置文件
**** 修改app database
**** 修改mbio api web ref_rna文件
**** 修改mbio api to_file文件
**** 修改webroot models mongo文件
**** DONE 接口修改 添加check参数





** 有参转录组参考基因组制作

*** DONE 棉花JGI参考基因组整理
   SCHEDULED: <2017-10-25 Wed>
    注释
    核对结果
    tsanger注释
    核对结果

*** DONE 玉米Annotation文件整理

*** DONE 写做数据库流程
*** DONE NCBI数据库流程 测试
    CLOSED: [2018-01-18 四 21:32]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-18 四 21:32]
    - State "NEXT"       from "DONE"       [2018-01-18 四 21:32]
    - State "DONE"       from "CANCELLED"  [2018-01-18 四 21:32]
    - State "DELEGATED"  from "WAITING"    [2018-01-18 四 21:31]
    :END:
*** DONE 棉铃虫参考基因组整理
    CLOSED: [2017-11-12 Sun 10:37]
    :LOGBOOK:
    - State "DONE"       from "TODO"       [2017-11-12 Sun 10:37]
    :END:
*** DONE https://www.ncbi.nlm.nih.gov/genome/?term=Punica+granatum 基因组整理
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:
*** DONE 辣椒参考基因组准备。杜和山给出的
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:
*** DONE 崔艳艳给的参考基因组整理
    CLOSED: [2017-12-27 三 22:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:29]
    :END:

*** DONE bug
**** 数据库KO问题 查询页转录本导表有问题
    TestRef数据库任然可能有问题
    kegg通路不对应
    查询页GO需要重导入

*** DONE 检查各数据库统计结果是否一致
*** DONE 基因组json文件完整性与路径检查
*** DONE 写脚本检查数据库统计不对应问题

*** DONE 查看GO参考导表是否有误
    SCHEDULED: <2017-10-27 Fri>
*** DONE 评估崔艳艳参考基因组
   SCHEDULED: <2017-11-01 Wed>

*** DONE 核对水稻和草鱼注释结果统计数据量
    CLOSED: [2017-11-12 Sun 11:30]
    :LOGBOOK:
    - State "DONE"       from "TODO"       [2017-11-12 Sun 11:30]
    :END:
*** DONE 烟草2017新版基因组整理
    CLOSED: [2017-12-24 日 20:51]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-24 日 20:51]
    - State "TODO"       from "DONE"       [2017-11-12 Sun 11:31]
    - State "DONE"       from "TODO"       [2017-11-12 Sun 11:30]
    :END:
*** DONE 基因组注释整理COG没有考虑一个基因有多个COG的情况
    CLOSED: [2017-12-24 日 20:51]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-24 日 20:51]
    :END:

*** DONE 刘旋给的两个基因组上线注意type ENSEMBLE正确区分1、2、3
    CLOSED: [2017-12-27 三 22:30] DEADLINE: <2017-12-25 一> SCHEDULED: <2017-12-25 一>
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2017-12-27 三 22:30]
    :END:
    注意type ENSEMBLE正确区分1、2、3
*** DONE 整理辣椒基因组
    CLOSED: [2017-12-24 日 20:46]
    :LOGBOOK:
    - State "DONE"       from "TODO"       [2017-12-24 日 20:46]
    :END:
*** 基因组问题修复
**** DONE 猫基因组问题 使用了rm的版本
     CLOSED: [2018-01-04 四 22:24]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:24]
     :END:
**** DONE 石榴基因组忘记添加
     CLOSED: [2018-01-04 四 22:25]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:25]
     :END:
**** DONE 本氏烟基因组忘记添加
     CLOSED: [2018-01-05 五 19:01] SCHEDULED: <2018-01-05 五>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-05 五 19:01]
     :END:
**** DONE 真菌基因组问题 使用masked基因组
     CLOSED: [2018-01-05 五 19:01]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-05 五 19:01]
     :END:

*** DONE 猫的基因组问题
    CLOSED: [2018-01-03 三 21:45]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-03 三 21:45]
    :END:
     cufflink stringtie 组装后边界超出是因为基因组使用了masked缘故
*** DONE 牵牛基因组去除gene: transcript: ensemble下载GFF的问题以后注意使用gtf
    CLOSED: [2018-01-26 五 20:29]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-26 五 20:29]
    :END:

** denovo云平台开发
*** 组装模块
**** DONE TRINITY TOOLS编写
     CLOSED: [2017-12-12 Tue 11:26]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:26]
     :END:

**** DONE TRINITY 虚拟内存使用研究 /mnt/ilustre/users/sanger-dev/workspace/20171109/Single_de_t3_1/Trinity__3
    CLOSED: [2018-01-10 三 22:54]
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-10 三 22:54]
    :END:
    有的命令内存过大

每个butterfly 占用8+N g的虚拟内存， 使用parafly容易造成虚拟内存超标把Trinity的butter改成串行
**** DONE Busco TOOLS编写
     CLOSED: [2017-12-12 Tue 11:26]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:26]
     :END:
**** DONE TRANsrate TOOLS编写
     CLOSED: [2017-11-12 Sun 12:44]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-11-12 Sun 12:44]
     :END:
**** DONE rna fastatat TOOLS编写
     CLOSED: [2017-12-12 Tue 11:27]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:27]
     :END:
**** DONE 整合组装modules
     CLOSED: [2017-12-24 日 20:51]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-24 日 20:51]
     :END:
**** DONE 组装结果导表
     CLOSED: [2017-12-12 Tue 11:27]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:27]
     :END:
**** DONE 组装结果导表 数据地址错误、重复到同一个表
     CLOSED: [2018-01-02 二 19:11]
     :LOGBOOK:
     - State "DONE"       from "PROJECT"    [2018-01-02 二 19:11]
     - State "PROJECT"    from "DONE"       [2018-01-02 二 19:11]


**** DONE 组装结果拆分组装优化一个module，结果评估一个module
     CLOSED: [2017-12-24 日 20:52] DEADLINE: <2017-12-13 Wed>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-24 日 20:52]
     :END:
**** DONE 组装问题如何跳过event
     CLOSED: [2017-12-26 二 22:22] SCHEDULED: <2017-12-25 一>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-26 二 22:22]
     :END:
**** DONE filter unigene on assemble module
     SCHEDULED: <2017-12-25 一>
**** DONE 导表函数修改 路径选择添加filter
     SCHEDULED: <2017-12-25 一>
**** DONE bug修复cog\kegg\排序，注释表格统计名称排序规范
     CLOSED: [2017-12-28 四 22:26]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:26]
     :END:
**** DONE 修改组装到表函数接受没有优化的结果
     CLOSED: [2017-12-28 四 22:27]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:27]
     :END:
**** DONE 插入基因集删除接口
     CLOSED: [2017-12-28 四 22:29]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:29]
     :END:
**** DONE 插入比对统计表格导表函数
     CLOSED: [2017-12-28 四 22:29]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-28 四 22:29]
     :END:
**** DONE venn图数据没插入因为修改结果名称，导致导表时找不到对应venn文件
     CLOSED: [2018-01-10 三 22:57]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-10 三 22:57]
     :END:
**** DONE transrate大数据报错研究 snap设置内存相关参数过小具体查看参数snap设置，不写任何参数好像可以
     CLOSED: [2018-01-10 三 23:00] SCHEDULED: <2018-01-12 五>
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-10 三 23:00]
     - State "NEXT"       from "DONE"       [2018-01-04 四 22:35]
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:35]
     - State "DONE"       from "NEXT"       [2017-12-29 五 18:42]
     :END:

**** DONE transrate大数据报错研究 salmon添加最后一个参数出不了表大量 有一个参数有两个值需要修改ruby脚本 单独运行可以但transrate包装后就不可以了
    CLOSED: [2018-01-12 五 19:17]
    可能和snap源码有关系
    :LOGBOOK:
    - State "DONE"       from "NEXT"       [2018-01-12 五 19:17]
    - State "NEXT"       from "DONE"       [2018-01-05 五 19:04]
    - State "DONE"       from "NEXT"       [2017-12-29 五 18:42]
    :END:
目前证明是slurm识别虚拟内存并自动控制，可增大内存申请或ssh localhost (需要配置机器)解决
**** DONE Trinity组装分为几个步骤butterfly分机器投递
     CLOSED: [2018-01-10 三 22:59]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-10 三 22:59]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:
***** DONE 分布投递tools
      CLOSED: [2018-01-03 三 21:41]
      :LOGBOOK:
      - State "DONE"       from "PROJECT"    [2018-01-03 三 21:41]
      - State "PROJECT"    from "DONE"       [2018-01-03 三 21:41]
      - State "DONE"       from "PROJECT"    [2018-01-03 三 21:41]
      - State "PROJECT"    from "DONE"       [2018-01-03 三 21:41]
      - State "DONE"       from "PROJECT"    [2018-01-03 三 21:41]
      - State "PROJECT"    from "DONE"       [2018-01-03 三 21:41]
      - State "DONE"       from "NEXT"       [2018-01-02 二 19:04]
      :END:
***** DONE 合并
      CLOSED: [2018-01-03 三 21:42]
      :LOGBOOK:
      - State "DONE"       from "NEXT"       [2018-01-03 三 21:42]
      :END:
***** DONE module修改
      CLOSED: [2018-01-03 三 21:42] SCHEDULED: <2018-01-03 三>
      :LOGBOOK:
      - State "DONE"       from "NEXT"       [2018-01-03 三 21:42]
      :END:

***** DONE 允许出错源目录自动重新运行
***** DONE 测试
      CLOSED: [2018-01-20 六 11:48] SCHEDULED: <2018-01-05 五>
      :LOGBOOK:
      - State "DONE"       from "PROJECT"    [2018-01-20 六 11:48]
      - State "PROJECT"    from "DONE"       [2018-01-20 六 11:48]
      - State "DONE"       from "NEXT"       [2018-01-20 六 11:48]
      :END:

**** DONE Trinity优化随机分布butter命令
     CLOSED: [2018-01-18 四 21:38]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:38]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 修改云平台denovo导表，测试会重复到两次
     CLOSED: [2018-01-26 五 20:41]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 20:41]
     - State "NEXT"       from "DONE"       [2018-01-26 五 20:41]
     - State "DONE"       from "PROJECT"    [2018-01-26 五 20:41]
     - State "PROJECT"    from "DONE"       [2018-01-26 五 20:41]
     :END:

**** DONE 组装结果长度统计表添加表头百分比
     CLOSED: [2018-01-18 四 21:39]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:39]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 组装sanger trinity修复，不能运行
     CLOSED: [2018-01-18 四 21:41]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:41]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:
     perl版本没装threads库，装了后影响注释的COG XML,DBI等pm需要重装

**** DONE 导表函数添加主表main_id
     CLOSED: [2018-01-03 三 21:47]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-03 三 21:47]
     :END:
     :PROPERTIES:
     :ARCHIVE_TIME: 2018-01-24 三 20:26
     :ARCHIVE_FILE: ~/work/GTD/todo.org
     :ARCHIVE_OLPATH: denovo云平台开发/组装模块
     :ARCHIVE_CATEGORY: todo
     :ARCHIVE_TODO: DONE
     :END:

**** DONE 导表函数错误，未做优化时初始化值仍然为优化的结果
     CLOSED: [2018-01-26 五 20:28]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 20:28]
     :END:
**** DONE 组装transrate中间重运行会依赖之前的结果，但是结果不完整回报错，表达量计算结果都是NAN
     CLOSED: [2018-01-24 三 20:15]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:15]
     :END:
**** DONE 组装输入文件不一致 gene2trans文件不对会报Index not found
     CLOSED: [2018-01-24 三 20:16]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-24 三 20:16]
     :END:
*** 注释模块
**** DONE denovo注释流程梳理
     CLOSED: [2017-12-12 Tue 11:32]
     :LOGBOOK:
     - State "DONE"       from "TODO"       [2017-12-12 Tue 11:32]
     :END:
**** DONE denovo注释module编写
     CLOSED: [2017-12-12 Tue 11:32]
     :LOGBOOK:
     - State "DONE"       from ""           [2017-12-12 Tue 11:32]
     :END:
**** DONE denovo注释导表
     CLOSED: [2017-12-12 Tue 11:32]
     :LOGBOOK:
     - State "DONE"       from ""           [2017-12-12 Tue 11:32]
     :END:
**** DONE denovo注释重运行接口
     SCHEDULED: <2017-12-25 一>


**** DONE 注释kegg分类结果排序，插入主表分类类型
     CLOSED: [2017-12-26 二 22:22]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-26 二 22:22]
     :END:

**** DONE 根据仝颜丽提供的新原型修改开发文档
     CLOSED: [2017-12-26 二 22:23]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2017-12-26 二 22:23]
     :END:

**** DONE 注释导表，GO重新插入seq_list, 仅二级分类

**** DONE percent添加或删除
     CLOSED: [2018-01-08 一 20:02]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-08 一 20:02]
     :END:

**** DONE kegg顺序
     CLOSED: [2018-01-08 一 20:02]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-08 一 20:02]
     :END:

**** DONE 注释导表参数格式修改，流程里调用添加参数

**** DONE fasta文件分割少序列
     CLOSED: [2018-01-18 四 21:41]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-18 四 21:41]
     :END:

     分割循环到达界限时跳过
**** DONE SwissProt P改大写
     CLOSED: [2018-01-22 一 19:21]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-22 一 19:21]
     :END:
**** DONE COG分类顺序问题修改
     CLOSED: [2018-01-08 一 20:02]
     基因顺序仍然不对
  :LOGBOOK:
  - State "DONE"       from "NEXT"       [2018-01-08 一 20:02]
     - State "NEXT"       from "DONE"       [2018-01-05 五 19:06]
     - State "DONE"       from "PROJECT"    [2018-01-05 五 19:06]
     - State "PROJECT"    from "DONE"       [2018-01-05 五 19:06]
     - State "DONE"       from "NEXT"       [2018-01-04 四 22:34]
     :END:

**** DONE 核查cog查询结果与统计不一致，前端查询选了基因的
     CLOSED: [2018-01-26 五 21:08]
     :LOGBOOK:
     - State "DONE"       from "NEXT"       [2018-01-26 五 21:08]
     :END:
** 蛋白云平台开发

*** 注释模块

*** ipath

*** interproscan
